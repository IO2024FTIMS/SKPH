{% extends "base.jinja" %}

{% block title %}{{ _("Tracking and managing resources module") }}{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  <h1>{{ _("Tracking and managing resources module") }}</h1>
  <p><a class="btn btn-primary btn-lg" href="{{ url_for('supply_chain.add_data') }}">{{ _("Add sample data") }}</a></p>


  <p><a class="btn btn-primary btn-lg" href="{{ url_for('supply_chain.truncate') }}">{{ _("Remove sample data") }}</a></p>
    <table class="table table-hover">
    <tr>
      <th>Charity campagin name: {{ charity_campaign.name }}</th>
    </tr>
    <tr>
      <th>Avalible resources:</th>
    </tr>

    {% if item_donations is none %}
    </table>
    <p>Could not find any items</p>

    {% else %}
    <tr>
      <td>Lp</td>
      <td>Resource type</td>
      <td>Number</td>
      <td>description</td>
    </tr>
    {% for donation in item_donations %}

      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ donation.type }}</td>
        <td>{{ donation.amount }}</td>
        <td><a href="{{ url_for('supply_chain.manage_resource', id=donation.id ) }}"><input type="button" value="Manage"/></a></td>
      </tr>

    {% endfor %}
  </table>
    {% endif %}

    <table class="table table-hover">
      <tr>
        <th>Current requests:</th>
      </tr>
  
      {% if current_requests is none %}
      </table>
      <p>Could not find any requests</p>
  
      {% else %}
      <tr>
        <td>Lp</td>
        <td>Name</td>
        <td>Status</td>
        <td> Affected </td>
        <td>Address </td>
        <td>Needs</td>
        <td>Amount</td>
        
      </tr>
      {% for request in current_requests %}
  
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ request.name }}</td>
          <td>{{ request.status }}</td>
          <td>
            <table class="table">
              <tr>
                <td>First name:</td>
                <td>{{ request.first_name }}</td>
              </tr>
              <tr>
                <td> Last name </td>
                <td> {{ request.last_name }} </td>
              </tr>
            </table>
          </td>
          <td>
            <table>
              <tr>
                <td>City:</td>
                <td>{{ request.city }}</td>
              </tr>
              <tr>
                <td> Street </td>
                <td> {{ request.street }} </td>
              </tr>
            </table>
          </td>
          <td>{{ request.type }}</td>
          <td> {{request.amount}} </td>
        </tr>
  
      {% endfor %}
    </table>
      {% endif %}


  <table>
    <tr>
      <th>Avalible money:</th>
    </tr>
  </table>

  <table>
    <tr>
      <th>Current requests: </th>
    </tr>
  </table>

</div>
{% endblock %}