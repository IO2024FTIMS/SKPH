{% extends "base.jinja" %}

{% block title %}{{ _("Affected Module") }}{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  <h1>{{ _("Affected Module") }}</h1>
  <div class="d-flex flex-column align-items-stretch">
    <div class="mb-2">
      {% if not samples_added %}
      <form action="{{ url_for('affected.samples') }}" method="post" class="d-flex w-100">
        <button class="btn btn-primary w-100">{{ _("Add Sample Data") }}</button>
      </form>
      {% else %}
      <button class="btn btn-secondary w-100" disabled>{{ _("Sample Data Added") }}</button>
      {% endif %}
    </div>
    <hr class="my-4" />
    <a class="btn btn-primary w-100 mb-2" href="{{ url_for('affected.fetch_all') }}">{{ _("View All Affected") }}</a>
    <a class="btn btn-primary w-100 mb-2" href="{{ url_for('affected.all_requests') }}">{{ _("View All Requests") }}</a>
  </div>

  <div>
  <h2>{{ _("Create Requests for Affected") }}</h2>
  {% for person in affected %}
  <div class="mb-2">
    <a class="btn btn-primary w-100"
       href="{{ url_for('affected.create_request', affected_id=person.id) }}">
      {{ _("Create Requests for") }} {{ person.first_name }} {{ person.last_name }}
    </a>
  </div>
  {% endfor %}
</div>

</div>
{% endblock %}
